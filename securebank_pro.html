<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè¶ SecureBank Pro - Game B·∫£o m·∫≠t Ng√¢n h√†ng Chuy√™n nghi·ªáp</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-bank-blue: #003366;
            --secondary-bank-blue: #004080;
            --accent-gold: #FFD700;
            --success-green: #28a745;
            --danger-red: #dc3545;
            --warning-orange: #fd7e14;
            --info-cyan: #17a2b8;
            --dark-bg: #0a1929;
            --card-bg: rgba(255, 255, 255, 0.05);
            --text-primary: #ffffff;
            --text-secondary: #b0bec5;
            --border-color: rgba(255, 215, 0, 0.2);
        }

        body {
            font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--primary-bank-blue) 25%, var(--secondary-bank-blue) 50%, var(--primary-bank-blue) 75%, var(--dark-bg) 100%);
            background-size: 400% 400%;
            animation: bankGradientFlow 12s ease-in-out infinite;
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Enhanced Banking Background Effects */
        .bank-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .bank-particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: var(--accent-gold);
            border-radius: 50%;
            animation: goldParticleFloat 8s ease-in-out infinite;
            box-shadow: 0 0 10px var(--accent-gold);
        }

        .digital-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(255, 215, 0, 0.08) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 215, 0, 0.08) 1px, transparent 1px);
            background-size: 60px 60px;
            animation: gridPulse 15s linear infinite;
            z-index: -2;
        }

        /* Bank Logo Animation */
        .bank-logo {
            position: fixed;
            top: 20px;
            left: 20px;
            font-size: 1.5rem;
            color: var(--accent-gold);
            text-shadow: 0 0 20px var(--accent-gold);
            animation: logoPulse 3s ease-in-out infinite;
            z-index: 1000;
        }

        /* Main container */
        .bank-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Enhanced Header */
        .bank-header {
            background: linear-gradient(135deg, var(--card-bg) 0%, rgba(255, 215, 0, 0.1) 100%);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(15px);
            box-shadow: 
                0 15px 35px rgba(0, 51, 102, 0.3),
                inset 0 1px 0 rgba(255, 215, 0, 0.2);
            animation: headerGlow 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .bank-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            animation: headerShine 3s ease-in-out infinite;
        }

        .bank-title {
            font-size: 3.2rem;
            font-weight: 900;
            text-align: center;
            background: linear-gradient(45deg, var(--accent-gold), #fff, var(--accent-gold));
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: goldTextFlow 4s ease-in-out infinite;
            margin-bottom: 15px;
            text-shadow: 0 0 30px var(--accent-gold);
        }

        .bank-subtitle {
            text-align: center;
            color: var(--text-secondary);
            font-size: 1.3rem;
            margin-bottom: 20px;
            font-weight: 500;
        }

        /* Navigation Menu */
        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: linear-gradient(135deg, var(--card-bg) 0%, rgba(255, 215, 0, 0.1) 100%);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 12px 20px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .nav-btn:hover, .nav-btn.active {
            background: linear-gradient(135deg, var(--accent-gold) 0%, #ffa500 100%);
            color: var(--dark-bg);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.3);
        }

        /* Game Screens */
        .game-screen {
            display: none;
        }

        .game-screen.active {
            display: block;
        }

        /* Enhanced Stats Panel */
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--card-bg) 0%, rgba(255, 215, 0, 0.05) 100%);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: statCardAppear 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--accent-gold);
            box-shadow: 
                0 20px 40px rgba(255, 215, 0, 0.2),
                0 0 30px rgba(255, 215, 0, 0.3);
        }

        .stat-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            animation: iconBounce 2s infinite ease-in-out;
            filter: drop-shadow(0 0 10px currentColor);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-gold);
            margin-bottom: 8px;
            text-shadow: 0 0 15px var(--accent-gold);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
            font-weight: 500;
        }

        /* Game Panels */
        .game-main {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .game-panel {
            background: linear-gradient(135deg, var(--card-bg) 0%, rgba(255, 215, 0, 0.03) 100%);
            border: 2px solid var(--border-color);
            border-radius: 18px;
            padding: 25px;
            backdrop-filter: blur(12px);
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 215, 0, 0.1);
            animation: panelSlideIn 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .game-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.08), transparent);
            transition: left 0.6s ease;
        }

        .game-panel:hover::before {
            left: 100%;
        }

        .panel-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--accent-gold);
            margin-bottom: 20px;
            text-align: center;
            padding: 12px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 10px;
            border-left: 4px solid var(--accent-gold);
            text-shadow: 0 0 10px var(--accent-gold);
        }

        /* Input fields */
        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 0.95rem;
        }

        .input-field {
            width: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.03) 100%);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 12px 16px;
            color: var(--text-primary);
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%);
        }

        .input-field:hover {
            border-color: rgba(255, 215, 0, 0.5);
        }

        /* Buttons */
        .btn {
            background: linear-gradient(135deg, var(--primary-bank-blue) 0%, var(--secondary-bank-blue) 100%);
            color: var(--text-primary);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 12px 24px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            margin: 5px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.4);
            background: linear-gradient(135deg, var(--accent-gold) 0%, #ffa500 100%);
            color: var(--dark-bg);
            border-color: var(--accent-gold);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-green) 0%, #218838 100%);
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #5cbf60 0%, #28a745 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger-red) 0%, #c82333 100%);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning-orange) 0%, #e0a800 100%);
        }

        .btn-info {
            background: linear-gradient(135deg, var(--info-cyan) 0%, #138496 100%);
        }

        /* Mini Game Specific Styles */
        .mini-game-container {
            min-height: 400px;
        }

        .password-strength-meter {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .strength-bar {
            height: 100%;
            transition: all 0.3s ease;
            border-radius: 10px;
        }

        .strength-very-weak { background: #dc3545; width: 20%; }
        .strength-weak { background: #fd7e14; width: 40%; }
        .strength-medium { background: #ffc107; width: 60%; }
        .strength-strong { background: #28a745; width: 80%; }
        .strength-very-strong { background: #20c997; width: 100%; }

        .phishing-email {
            background: rgba(220, 53, 69, 0.1);
            border: 2px solid rgba(220, 53, 69, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            color: var(--text-primary);
        }

        .safe-email {
            background: rgba(40, 167, 69, 0.1);
            border: 2px solid rgba(40, 167, 69, 0.3);
        }

        .hash-race-timer {
            font-size: 2rem;
            color: var(--accent-gold);
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
        }

        .network-node {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--info-cyan), #138496);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .network-node:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--info-cyan);
        }

        .network-node.infected {
            background: linear-gradient(135deg, var(--danger-red), #c82333);
            animation: pulse 1s infinite;
        }

        .network-node.protected {
            background: linear-gradient(135deg, var(--success-green), #218838);
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--success-green) 0%, #218838 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: linear-gradient(135deg, var(--danger-red) 0%, #c82333 100%);
        }

        .notification.warning {
            background: linear-gradient(135deg, var(--warning-orange) 0%, #e0a800 100%);
        }

        /* Animations */
        @keyframes bankGradientFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes goldParticleFloat {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
                opacity: 0.3;
            }
            50% {
                transform: translateY(-20px) rotate(180deg);
                opacity: 0.8;
            }
        }

        @keyframes gridPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        @keyframes logoPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes headerGlow {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes headerShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        @keyframes goldTextFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes statCardAppear {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes iconBounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes panelSlideIn {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .bank-container {
                padding: 10px;
            }
            
            .bank-title {
                font-size: 2.5rem;
            }
            
            .game-main {
                grid-template-columns: 1fr;
            }
            
            .stats-panel {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .nav-menu {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Quiz specific styles */
        .quiz-question {
            background: rgba(23, 162, 184, 0.1);
            border: 2px solid rgba(23, 162, 184, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .quiz-options {
            display: grid;
            gap: 10px;
            margin: 15px 0;
        }

        .quiz-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            background: rgba(255, 215, 0, 0.1);
            border-color: var(--accent-gold);
        }

        .quiz-option.selected {
            background: rgba(255, 215, 0, 0.2);
            border-color: var(--accent-gold);
        }

        .quiz-option.correct {
            background: rgba(40, 167, 69, 0.2);
            border-color: var(--success-green);
        }

        .quiz-option.incorrect {
            background: rgba(220, 53, 69, 0.2);
            border-color: var(--danger-red);
        }

        .progress-bar {
            width: 100%;
            height: 25px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success-green) 0%, var(--accent-gold) 100%);
            border-radius: 12px;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <!-- Background Effects -->
    <div class="bank-particles" id="particles"></div>
    <div class="digital-grid"></div>
    <div class="bank-logo">üè¶ SecureBank</div>

    <!-- Main Container -->
    <div class="bank-container">
        <!-- Header -->
        <div class="bank-header">
            <h1 class="bank-title">üè¶ SecureBank Pro</h1>
            <p class="bank-subtitle">Game B·∫£o m·∫≠t Ng√¢n h√†ng Chuy√™n nghi·ªáp v·ªõi 6 Mini Games</p>
        </div>

        <!-- Navigation Menu -->
        <div class="nav-menu">
            <button class="nav-btn active" onclick="showScreen('main-game')">üè¶ Game Ch√≠nh</button>
            <button class="nav-btn" onclick="showScreen('password-game')">üîê T·∫°o M·∫≠t Kh·∫©u</button>
            <button class="nav-btn" onclick="showScreen('crypto-puzzle')">üß© Crypto Puzzle</button>
            <button class="nav-btn" onclick="showScreen('phishing-detect')">üé£ Ph√°t Hi·ªán Phishing</button>
            <button class="nav-btn" onclick="showScreen('network-security')">üåê B·∫£o M·∫≠t M·∫°ng</button>
            <button class="nav-btn" onclick="showScreen('hash-race')">‚ö° Hash Race</button>
            <button class="nav-btn" onclick="showScreen('social-defense')">üë• Ph√≤ng Th·ªß X√£ H·ªôi</button>
        </div>

        <!-- Stats Panel -->
        <div class="stats-panel">
            <div class="stat-card">
                <div class="stat-icon">üìä</div>
                <div class="stat-value" id="totalScore">0</div>
                <div class="stat-label">T·ªïng ƒêi·ªÉm</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üéØ</div>
                <div class="stat-value" id="currentLevel">1</div>
                <div class="stat-label">Level Hi·ªán T·∫°i</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üîí</div>
                <div class="stat-value" id="completedTransactions">0</div>
                <div class="stat-label">Giao D·ªãch Ho√†n Th√†nh</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üèÜ</div>
                <div class="stat-value" id="achievements">0</div>
                <div class="stat-label">Th√†nh T√≠ch</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚≠ê</div>
                <div class="stat-value" id="streak">0</div>
                <div class="stat-label">Chu·ªói Th·∫Øng</div>
            </div>
        </div>

        <!-- Main Banking Game Screen -->
        <div id="main-game" class="game-screen active">
            <div class="game-main">
                <!-- Sender Panel -->
                <div class="game-panel">
                    <h3 class="panel-title">üè¶ B√™n G·ª≠i (Ng√¢n H√†ng)</h3>
                    
                    <div class="input-group">
                        <label class="input-label">üîë Kh√≥a AES (256-bit)</label>
                        <input type="text" id="aesKey" class="input-field" placeholder="Nh·∫≠p kh√≥a m√£ h√≥a AES..." readonly>
                        <button class="btn btn-info" onclick="generateAESKey()">üîë T·∫°o kh√≥a AES</button>
                    </div>

                    <div class="input-group">
                        <label class="input-label">üí≥ S·ªë t√†i kho·∫£n ng∆∞·ªùi g·ª≠i</label>
                        <input type="text" id="senderAccount" class="input-field" placeholder="VD: 1234567890123">
                    </div>

                    <div class="input-group">
                        <label class="input-label">üí≥ S·ªë t√†i kho·∫£n ng∆∞·ªùi nh·∫≠n</label>
                        <input type="text" id="receiverAccount" class="input-field" placeholder="VD: 9876543210987">
                    </div>

                    <div class="input-group">
                        <label class="input-label">üí∞ S·ªë ti·ªÅn (VND)</label>
                        <input type="number" id="amount" class="input-field" placeholder="VD: 1000000" min="1000">
                    </div>

                    <div class="input-group">
                        <label class="input-label">üìù N·ªôi dung chuy·ªÉn kho·∫£n</label>
                        <input type="text" id="description" class="input-field" placeholder="VD: Thanh to√°n h√≥a ƒë∆°n">
                    </div>

                    <div class="input-group">
                        <label class="input-label">üîí D·ªØ li·ªáu ƒë√£ m√£ h√≥a</label>
                        <textarea id="encryptedData" class="input-field" rows="4" readonly placeholder="D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c m√£ h√≥a t·ª± ƒë·ªông..."></textarea>
                    </div>

                    <button class="btn btn-success" onclick="encryptTransaction()">üîí M√£ h√≥a d·ªØ li·ªáu</button>
                    <button class="btn" onclick="sendTransaction()">üì® G·ª≠i giao d·ªãch</button>
                </div>

                <!-- Receiver Panel -->
                <div class="game-panel">
                    <h3 class="panel-title">üè™ B√™n Nh·∫≠n (Merchant)</h3>
                    
                    <div class="input-group">
                        <label class="input-label">üîë Kh√≥a gi·∫£i m√£ AES</label>
                        <input type="text" id="decryptKey" class="input-field" placeholder="Nh·∫≠p kh√≥a ƒë·ªÉ gi·∫£i m√£...">
                    </div>

                    <div class="input-group">
                        <label class="input-label">üì® D·ªØ li·ªáu nh·∫≠n ƒë∆∞·ª£c</label>
                        <textarea id="receivedData" class="input-field" rows="4" readonly placeholder="Ch·ªù nh·∫≠n d·ªØ li·ªáu..."></textarea>
                    </div>

                    <div class="input-group">
                        <label class="input-label">üîì D·ªØ li·ªáu ƒë√£ gi·∫£i m√£</label>
                        <textarea id="decryptedData" class="input-field" rows="6" readonly placeholder="D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã sau khi gi·∫£i m√£..."></textarea>
                    </div>

                    <div class="input-group">
                        <label class="input-label">üì± M√£ OTP (6 ch·ªØ s·ªë)</label>
                        <input type="text" id="otpInput" class="input-field" placeholder="Nh·∫≠p m√£ OTP..." maxlength="6">
                        <div style="margin: 10px 0;">
                            <button class="btn btn-warning" onclick="generateOTP()">üì± T·∫°o m√£ OTP</button>
                            <span id="otpDisplay" style="margin-left: 15px; color: var(--accent-gold); font-weight: bold; font-size: 1.2rem;"></span>
                        </div>
                    </div>

                    <button class="btn btn-info" onclick="decryptTransaction()">üîì Gi·∫£i m√£ d·ªØ li·ªáu</button>
                    <button class="btn btn-success" onclick="verifyTransaction()">‚úÖ X√°c th·ª±c giao d·ªãch</button>
                </div>

                <!-- Security Tools Panel -->
                <div class="game-panel">
                    <h3 class="panel-title">üõ°Ô∏è C√¥ng c·ª• B·∫£o m·∫≠t</h3>
                    
                    <div class="input-group">
                        <label class="input-label">üî® T·∫°o Hash SHA-256</label>
                        <input type="text" id="hashInput" class="input-field" placeholder="Nh·∫≠p d·ªØ li·ªáu c·∫ßn hash...">
                        <button class="btn btn-info" onclick="generateHash()">üî® T·∫°o Hash</button>
                        <input type="text" id="hashOutput" class="input-field" readonly placeholder="Hash s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y..." style="margin-top: 10px;">
                    </div>

                    <div class="input-group">
                        <label class="input-label">üîç Ki·ªÉm tra Phishing</label>
                        <input type="text" id="phishingInput" class="input-field" placeholder="Nh·∫≠p URL ho·∫∑c email ƒë·ªÉ ki·ªÉm tra...">
                        <button class="btn btn-warning" onclick="checkPhishing()">üîç Ki·ªÉm tra Phishing</button>
                        <div id="phishingResult" style="margin-top: 10px; padding: 10px; border-radius: 8px; display: none;"></div>
                    </div>

                    <div class="input-group">
                        <button class="btn btn-success" onclick="exportGameData()">üíæ Xu·∫•t d·ªØ li·ªáu</button>
                        <button class="btn btn-info" onclick="importGameData()">üì• Nh·∫≠p d·ªØ li·ªáu</button>
                        <input type="file" id="importFile" style="display: none;" accept=".json" onchange="handleImportFile(event)">
                    </div>

                    <div class="input-group">
                        <label class="input-label">üìä L·ªãch s·ª≠ giao d·ªãch</label>
                        <div id="transactionHistory" style="max-height: 150px; overflow-y: auto; background: rgba(0,0,0,0.2); border-radius: 8px; padding: 10px;">
                            <p style="color: var(--text-secondary); text-align: center;">Ch∆∞a c√≥ giao d·ªãch n√†o</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Password Strength Game -->
        <div id="password-game" class="game-screen">
            <div class="mini-game-container">
                <div class="game-panel">
                    <h3 class="panel-title">üîê Game T·∫°o M·∫≠t Kh·∫©u M·∫°nh</h3>
                    
                    <div class="input-group">
                        <label class="input-label">Nh·∫≠p m·∫≠t kh·∫©u c·ªßa b·∫°n:</label>
                        <input type="password" id="userPassword" class="input-field" placeholder="T·∫°o m·∫≠t kh·∫©u m·∫°nh..." oninput="checkPasswordStrength()">
                        <button class="btn btn-info" onclick="togglePasswordVisibility('userPassword')">üëÅÔ∏è Hi·ªán/·∫®n</button>
                    </div>

                    <div class="password-strength-meter">
                        <div id="strengthBar" class="strength-bar"></div>
                    </div>
                    
                    <div id="passwordFeedback" style="margin: 15px 0; color: var(--text-secondary);"></div>

                    <div class="input-group">
                        <label class="input-label">T·∫°o m·∫≠t kh·∫©u t·ª± ƒë·ªông:</label>
                        <div style="display: flex; gap: 10px; margin: 10px 0;">
                            <label><input type="checkbox" id="includeUppercase" checked> Ch·ªØ hoa</label>
                            <label><input type="checkbox" id="includeLowercase" checked> Ch·ªØ th∆∞·ªùng</label>
                            <label><input type="checkbox" id="includeNumbers" checked> S·ªë</label>
                            <label><input type="checkbox" id="includeSymbols" checked> K√Ω t·ª± ƒë·∫∑c bi·ªát</label>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <label>ƒê·ªô d√†i:</label>
                            <input type="range" id="passwordLength" min="8" max="32" value="12" oninput="updateLengthDisplay()">
                            <span id="lengthDisplay">12</span>
                        </div>
                        <button class="btn btn-success" onclick="generateStrongPassword()">üé≤ T·∫°o m·∫≠t kh·∫©u</button>
                        <input type="text" id="generatedPassword" class="input-field" readonly style="margin-top: 10px;">
                    </div>

                    <div class="input-group">
                        <h4>üèÜ Th·ª≠ th√°ch m·∫≠t kh·∫©u:</h4>
                        <div id="passwordChallenge">
                            <p>T·∫°o m·∫≠t kh·∫©u th·ªèa m√£n c√°c y√™u c·∫ßu sau:</p>
                            <ul id="challengeRequirements"></ul>
                        </div>
                        <button class="btn btn-warning" onclick="startPasswordChallenge()">üéØ B·∫Øt ƒë·∫ßu th·ª≠ th√°ch</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Crypto Puzzle Game -->
        <div id="crypto-puzzle" class="game-screen">
            <div class="mini-game-container">
                <div class="game-panel">
                    <h3 class="panel-title">üß© Game Gi·∫£i M√£ Crypto</h3>
                    
                    <div class="input-group">
                        <label class="input-label">Ch·ªçn lo·∫°i m√£ h√≥a:</label>
                        <select id="cipherType" class="input-field" onchange="generateCryptoPuzzle()">
                            <option value="caesar">Caesar Cipher</option>
                            <option value="vigenere">Vigenere Cipher</option>
                            <option value="reverse">Reverse Text</option>
                            <option value="base64">Base64 Encoding</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label class="input-label">VƒÉn b·∫£n ƒë√£ m√£ h√≥a:</label>
                        <textarea id="encryptedPuzzle" class="input-field" rows="4" readonly></textarea>
                        <div id="puzzleHint" style="margin: 10px 0; color: var(--accent-gold); font-style: italic;"></div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">Nh·∫≠p k·∫øt qu·∫£ gi·∫£i m√£:</label>
                        <textarea id="puzzleSolution" class="input-field" rows="4" placeholder="Nh·∫≠p k·∫øt qu·∫£ gi·∫£i m√£..."></textarea>
                    </div>

                    <div class="input-group">
                        <button class="btn btn-info" onclick="generateCryptoPuzzle()">üé≤ T·∫°o c√¢u ƒë·ªë m·ªõi</button>
                        <button class="btn btn-success" onclick="checkPuzzleSolution()">‚úÖ Ki·ªÉm tra</button>
                        <button class="btn btn-warning" onclick="showPuzzleHint()">üí° G·ª£i √Ω</button>
                    </div>

                    <div id="puzzleResult" style="margin: 15px 0; padding: 15px; border-radius: 8px; display: none;"></div>
                </div>
            </div>
        </div>

        <!-- Phishing Detection Game -->
        <div id="phishing-detect" class="game-screen">
            <div class="mini-game-container">
                <div class="game-panel">
                    <h3 class="panel-title">üé£ Game Ph√°t Hi·ªán Phishing</h3>
                    
                    <div id="phishingScenario">
                        <h4>üìß Email c·∫ßn ki·ªÉm tra:</h4>
                        <div id="phishingEmail" class="phishing-email">
                            <div id="emailContent">ƒêang t·∫£i email...</div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">ƒê√¢y c√≥ ph·∫£i email phishing kh√¥ng?</label>
                        <div style="display: flex; gap: 15px; margin: 15px 0;">
                            <button class="btn btn-danger" onclick="reportPhishing(true)">üö® ƒê√¢y l√† Phishing</button>
                            <button class="btn btn-success" onclick="reportPhishing(false)">‚úÖ Email An to√†n</button>
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">T·∫°i sao b·∫°n nghƒ© v·∫≠y?</label>
                        <textarea id="phishingReason" class="input-field" rows="3" placeholder="Gi·∫£i th√≠ch l√Ω do..."></textarea>
                    </div>

                    <div class="input-group">
                        <button class="btn btn-info" onclick="loadNewPhishingEmail()">üìß Email m·ªõi</button>
                        <button class="btn btn-warning" onclick="showPhishingTips()">üí° M·∫πo ph√°t hi·ªán</button>
                    </div>

                    <div id="phishingFeedback" style="margin: 15px 0; padding: 15px; border-radius: 8px; display: none;"></div>

                    <div id="phishingTips" style="margin: 15px 0; padding: 15px; background: rgba(23, 162, 184, 0.1); border-radius: 8px; display: none;">
                        <h4>üí° M·∫πo ph√°t hi·ªán email phishing:</h4>
                        <ul>
                            <li>Ki·ªÉm tra ƒë·ªãa ch·ªâ email ng∆∞·ªùi g·ª≠i</li>
                            <li>Ch√∫ √Ω ƒë·∫øn l·ªói ch√≠nh t·∫£ v√† ng·ªØ ph√°p</li>
                            <li>C·∫£nh gi√°c v·ªõi c√°c y√™u c·∫ßu c·∫•p b√°ch</li>
                            <li>Kh√¥ng click v√†o link ƒë√°ng nghi</li>
                            <li>X√°c minh th√¥ng tin qua k√™nh ch√≠nh th·ª©c</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Network Security Game -->
        <div id="network-security" class="game-screen">
            <div class="mini-game-container">
                <div class="game-panel">
                    <h3 class="panel-title">üåê Game B·∫£o M·∫≠t M·∫°ng</h3>
                    
                    <div class="input-group">
                        <h4>üñ•Ô∏è M·∫°ng m√°y t√≠nh c·ªßa b·∫°n:</h4>
                        <div id="networkGrid" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin: 20px 0;"></div>
                    </div>

                    <div class="input-group">
                        <h4>üìä Tr·∫°ng th√°i m·∫°ng:</h4>
                        <div style="display: flex; gap: 20px; margin: 15px 0;">
                            <div>üü¢ An to√†n: <span id="safeNodes">0</span></div>
                            <div>üî¥ B·ªã nhi·ªÖm: <span id="infectedNodes">0</span></div>
                            <div>üõ°Ô∏è ƒê∆∞·ª£c b·∫£o v·ªá: <span id="protectedNodes">0</span></div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">C√¥ng c·ª• b·∫£o m·∫≠t:</label>
                        <div style="display: flex; gap: 10px; margin: 15px 0;">
                            <button class="btn btn-info" onclick="deployFirewall()">üî• Tri·ªÉn khai Firewall</button>
                            <button class="btn btn-success" onclick="installAntivirus()">üõ°Ô∏è C√†i Antivirus</button>
                            <button class="btn btn-warning" onclick="updateSecurity()">‚ö° C·∫≠p nh·∫≠t B·∫£o m·∫≠t</button>
                        </div>
                    </div>

                    <div class="input-group">
                        <div style="display: flex; gap: 15px; margin: 15px 0;">
                            <button class="btn btn-danger" onclick="simulateAttack()">‚ö†Ô∏è M√¥ ph·ªèng t·∫•n c√¥ng</button>
                            <button class="btn btn-success" onclick="startNetworkGame()">üéÆ B·∫Øt ƒë·∫ßu game</button>
                            <button class="btn" onclick="resetNetwork()">üîÑ Reset m·∫°ng</button>
                        </div>
                    </div>

                    <div id="networkStatus" style="margin: 15px 0; padding: 15px; border-radius: 8px; background: rgba(0,0,0,0.2);">
                        <h4>üìà Th·ªëng k√™ game:</h4>
                        <p>T·∫•n c√¥ng ƒë√£ ch·∫∑n: <span id="attacksBlocked">0</span></p>
                        <p>M√°y t√≠nh c·ª©u ƒë∆∞·ª£c: <span id="computersSaved">0</span></p>
                        <p>ƒêi·ªÉm b·∫£o m·∫≠t: <span id="securityScore">100</span>/100</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hash Race Game -->
        <div id="hash-race" class="game-screen">
            <div class="mini-game-container">
                <div class="game-panel">
                    <h3 class="panel-title">‚ö° Game Hash Race</h3>
                    
                    <div class="input-group">
                        <h4>üéØ Th·ª≠ th√°ch hi·ªán t·∫°i:</h4>
                        <div id="hashChallenge" style="background: rgba(255, 215, 0, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <p>T√¨m chu·ªói c√≥ hash SHA-256 b·∫Øt ƒë·∫ßu b·∫±ng: <strong id="targetPrefix">00</strong></p>
                        </div>
                    </div>

                    <div class="hash-race-timer" id="hashTimer">00:00</div>

                    <div class="input-group">
                        <label class="input-label">Nh·∫≠p chu·ªói ƒë·ªÉ th·ª≠:</label>
                        <input type="text" id="hashInput" class="input-field" placeholder="Nh·∫≠p chu·ªói b·∫•t k·ª≥...">
                        <button class="btn btn-info" onclick="calculateHash()">üî® T√≠nh Hash</button>
                    </div>

                    <div class="input-group">
                        <label class="input-label">Hash SHA-256:</label>
                        <input type="text" id="hashResult" class="input-field" readonly>
                    </div>

                    <div class="input-group">
                        <div style="display: flex; gap: 15px; margin: 15px 0;">
                            <button class="btn btn-success" onclick="startHashRace()">üèÅ B·∫Øt ƒë·∫ßu cu·ªôc ƒëua</button>
                            <button class="btn btn-warning" onclick="autoHashSearch()">ü§ñ T√¨m ki·∫øm t·ª± ƒë·ªông</button>
                            <button class="btn btn-danger" onclick="stopHashRace()">‚èπÔ∏è D·ª´ng</button>
                        </div>
                    </div>

                    <div class="input-group">
                        <h4>üìä Th·ªëng k√™:</h4>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 15px 0;">
                            <div>L·∫ßn th·ª≠: <span id="hashAttempts">0</span></div>
                            <div>Th√†nh c√¥ng: <span id="hashSuccesses">0</span></div>
                            <div>Th·ªùi gian nhanh nh·∫•t: <span id="bestTime">--</span></div>
                            <div>Hash/gi√¢y: <span id="hashRate">0</span></div>
                        </div>
                    </div>

                    <div id="hashHistory" style="max-height: 200px; overflow-y: auto; background: rgba(0,0,0,0.2); border-radius: 8px; padding: 10px; margin: 15px 0;">
                        <h4>üèÜ L·ªãch s·ª≠ th√†nh c√¥ng:</h4>
                        <div id="successfulHashes">Ch∆∞a c√≥ hash n√†o th√†nh c√¥ng</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Social Engineering Defense Game -->
        <div id="social-defense" class="game-screen">
            <div class="mini-game-container">
                <div class="game-panel">
                    <h3 class="panel-title">üë• Game Ph√≤ng Th·ªß K·ªπ Thu·∫≠t X√£ H·ªôi</h3>
                    
                    <div id="socialScenario">
                        <h4>üìû T√¨nh hu·ªëng:</h4>
                        <div id="scenarioContent" style="background: rgba(255, 193, 7, 0.1); padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 4px solid var(--warning-orange);">
                            ƒêang t·∫£i t√¨nh hu·ªëng...
                        </div>
                    </div>

                    <div class="input-group">
                        <h4>ü§î B·∫°n s·∫Ω ph·∫£n ·ª©ng nh∆∞ th·∫ø n√†o?</h4>
                        <div id="socialOptions" style="display: grid; gap: 10px; margin: 15px 0;">
                            <!-- Options will be loaded dynamically -->
                        </div>
                    </div>

                    <div class="input-group">
                        <button class="btn btn-info" onclick="loadNewSocialScenario()">üîÑ T√¨nh hu·ªëng m·ªõi</button>
                        <button class="btn btn-warning" onclick="showSocialTips()">üí° M·∫πo ph√≤ng th·ªß</button>
                    </div>

                    <div id="socialFeedback" style="margin: 15px 0; padding: 15px; border-radius: 8px; display: none;"></div>

                    <div id="socialTips" style="margin: 15px 0; padding: 15px; background: rgba(40, 167, 69, 0.1); border-radius: 8px; display: none;">
                        <h4>üí° M·∫πo ph√≤ng th·ªß k·ªπ thu·∫≠t x√£ h·ªôi:</h4>
                        <ul>
                            <li>Lu√¥n x√°c minh danh t√≠nh ng∆∞·ªùi li√™n l·∫°c</li>
                            <li>Kh√¥ng cung c·∫•p th√¥ng tin c√° nh√¢n qua ƒëi·ªán tho·∫°i</li>
                            <li>C·∫£nh gi√°c v·ªõi c√°c y√™u c·∫ßu kh·∫©n c·∫•p</li>
                            <li>Ki·ªÉm tra th√¥ng tin qua k√™nh ch√≠nh th·ª©c</li>
                            <li>B√°o c√°o c√°c cu·ªôc g·ªçi ƒë√°ng nghi</li>
                            <li>Kh√¥ng click v√†o link t·ª´ ng∆∞·ªùi l·∫°</li>
                        </ul>
                    </div>

                    <div class="input-group">
                        <h4>üìà Th·ªëng k√™ ph√≤ng th·ªß:</h4>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 15px 0;">
                            <div>T·∫•n c√¥ng ƒë√£ ph√°t hi·ªán: <span id="attacksDetected">0</span></div>
                            <div>Quy·∫øt ƒë·ªãnh ƒë√∫ng: <span id="correctDecisions">0</span></div>
                            <div>T·ª∑ l·ªá th√†nh c√¥ng: <span id="successRate">0%</span></div>
                            <div>M·ª©c ƒë·ªô c·∫£nh gi√°c: <span id="alertLevel">B√¨nh th∆∞·ªùng</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification" class="notification"></div>

    <script>
        // Game State Management
        const gameState = {
            totalScore: 0,
            currentLevel: 1,
            completedTransactions: 0,
            achievements: 0,
            streak: 0,
            currentAESKey: '',
            currentOTP: '',
            transactionHistory: [],
            
            // Mini Games Stats
            passwordChallenges: 0,
            cryptoSolved: 0,
            phishingDetected: 0,
            networkDefended: 0,
            hashesFound: 0,
            socialDefended: 0
        };

        // Initialize game on load
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            updateStatsDisplay();
            loadGameState();
            startPasswordChallenge();
            loadNewPhishingEmail();
            startNetworkGame();
            loadNewSocialScenario();
        });

        // Particle Animation System
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'bank-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Screen Navigation
        function showScreen(screenId) {
            // Hide all screens
            const screens = document.querySelectorAll('.game-screen');
            screens.forEach(screen => screen.classList.remove('active'));
            
            // Show selected screen
            document.getElementById(screenId).classList.add('active');
            
            // Update nav buttons
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Stats Management
        function updateStatsDisplay() {
            document.getElementById('totalScore').textContent = gameState.totalScore;
            document.getElementById('currentLevel').textContent = gameState.currentLevel;
            document.getElementById('completedTransactions').textContent = gameState.completedTransactions;
            document.getElementById('achievements').textContent = gameState.achievements;
            document.getElementById('streak').textContent = gameState.streak;
        }

        function addScore(points, reason = '') {
            gameState.totalScore += points;
            updateStatsDisplay();
            showNotification(`+${points} ƒëi·ªÉm! ${reason}`, 'success');
            saveGameState();
        }

        // Notification System
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Main Banking Game Functions
        function generateAESKey() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let key = '';
            for (let i = 0; i < 32; i++) {
                key += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            gameState.currentAESKey = key;
            document.getElementById('aesKey').value = key;
            addScore(10, 'T·∫°o kh√≥a AES th√†nh c√¥ng');
        }

        async function encryptTransaction() {
            const senderAccount = document.getElementById('senderAccount').value;
            const receiverAccount = document.getElementById('receiverAccount').value;
            const amount = document.getElementById('amount').value;
            const description = document.getElementById('description').value;
            const aesKey = document.getElementById('aesKey').value;

            if (!senderAccount || !receiverAccount || !amount || !description || !aesKey) {
                showNotification('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!', 'error');
                return;
            }

            // Validate account numbers
            if (!/^\d{9,12}$/.test(senderAccount) || !/^\d{9,12}$/.test(receiverAccount)) {
                showNotification('S·ªë t√†i kho·∫£n ph·∫£i c√≥ 9-12 ch·ªØ s·ªë!', 'error');
                return;
            }

            // Validate amount
            if (amount < 1000) {
                showNotification('S·ªë ti·ªÅn t·ªëi thi·ªÉu l√† 1,000 VND!', 'error');
                return;
            }

            const transactionData = {
                sender: senderAccount,
                receiver: receiverAccount,
                amount: parseInt(amount),
                description: description,
                timestamp: new Date().toISOString()
            };

            try {
                const encrypted = await encryptAES(JSON.stringify(transactionData), aesKey);
                document.getElementById('encryptedData').value = encrypted;
                addScore(20, 'M√£ h√≥a giao d·ªãch th√†nh c√¥ng');
                showNotification('D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c m√£ h√≥a th√†nh c√¥ng!', 'success');
            } catch (error) {
                showNotification('L·ªói m√£ h√≥a: ' + error.message, 'error');
            }
        }

        function sendTransaction() {
            const encryptedData = document.getElementById('encryptedData').value;
            if (!encryptedData) {
                showNotification('Vui l√≤ng m√£ h√≥a d·ªØ li·ªáu tr∆∞·ªõc khi g·ª≠i!', 'error');
                return;
            }

            document.getElementById('receivedData').value = encryptedData;
            addScore(15, 'G·ª≠i giao d·ªãch th√†nh c√¥ng');
            showNotification('Giao d·ªãch ƒë√£ ƒë∆∞·ª£c g·ª≠i!', 'success');
        }

        async function decryptTransaction() {
            const encryptedData = document.getElementById('receivedData').value;
            const decryptKey = document.getElementById('decryptKey').value;

            if (!encryptedData || !decryptKey) {
                showNotification('Vui l√≤ng nh·∫≠p d·ªØ li·ªáu v√† kh√≥a gi·∫£i m√£!', 'error');
                return;
            }

            try {
                const decrypted = await decryptAES(encryptedData, decryptKey);
                document.getElementById('decryptedData').value = decrypted;
                addScore(30, 'Gi·∫£i m√£ th√†nh c√¥ng');
                showNotification('D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c gi·∫£i m√£ th√†nh c√¥ng!', 'success');
            } catch (error) {
                showNotification('L·ªói gi·∫£i m√£: Kh√≥a kh√¥ng ch√≠nh x√°c!', 'error');
            }
        }

        function generateOTP() {
            const otp = Math.floor(100000 + Math.random() * 900000).toString();
            gameState.currentOTP = otp;
            document.getElementById('otpDisplay').textContent = `M√£ OTP: ${otp}`;
            
            // Auto expire OTP after 2 minutes
            setTimeout(() => {
                document.getElementById('otpDisplay').textContent = 'M√£ OTP ƒë√£ h·∫øt h·∫°n';
                gameState.currentOTP = '';
            }, 120000);
            
            showNotification('M√£ OTP ƒë√£ ƒë∆∞·ª£c t·∫°o!', 'success');
        }

        function verifyTransaction() {
            const otpInput = document.getElementById('otpInput').value;
            const decryptedData = document.getElementById('decryptedData').value;

            if (!decryptedData) {
                showNotification('Vui l√≤ng gi·∫£i m√£ d·ªØ li·ªáu tr∆∞·ªõc!', 'error');
                return;
            }

            if (!otpInput) {
                showNotification('Vui l√≤ng nh·∫≠p m√£ OTP!', 'error');
                return;
            }

            if (otpInput !== gameState.currentOTP) {
                showNotification('M√£ OTP kh√¥ng ch√≠nh x√°c!', 'error');
                return;
            }

            // Transaction successful
            gameState.completedTransactions++;
            gameState.streak++;
            const bonusPoints = 100 + (gameState.currentLevel * 20) + (gameState.streak * 10);
            addScore(bonusPoints, `Ho√†n th√†nh giao d·ªãch (Level ${gameState.currentLevel})`);
            
            // Add to history
            const transaction = {
                id: gameState.completedTransactions,
                timestamp: new Date().toLocaleString('vi-VN'),
                data: decryptedData,
                level: gameState.currentLevel
            };
            gameState.transactionHistory.push(transaction);
            updateTransactionHistory();
            
            // Level up check
            if (gameState.completedTransactions % 5 === 0) {
                levelUp();
            }

            showNotification('üéâ Giao d·ªãch ho√†n th√†nh th√†nh c√¥ng!', 'success');
            
            // Reset form
            setTimeout(resetTransactionForm, 2000);
        }

        function levelUp() {
            gameState.currentLevel++;
            gameState.achievements++;
            addScore(gameState.currentLevel * 50, `L√™n c·∫•p ${gameState.currentLevel}!`);
            showNotification(`üÜô Ch√∫c m·ª´ng! B·∫°n ƒë√£ l√™n Level ${gameState.currentLevel}!`, 'success');
        }

        function resetTransactionForm() {
            // Clear all input fields
            document.getElementById('senderAccount').value = '';
            document.getElementById('receiverAccount').value = '';
            document.getElementById('amount').value = '';
            document.getElementById('description').value = '';
            document.getElementById('encryptedData').value = '';
            document.getElementById('receivedData').value = '';
            document.getElementById('decryptedData').value = '';
            document.getElementById('decryptKey').value = '';
            document.getElementById('otpInput').value = '';
            document.getElementById('otpDisplay').textContent = '';
            
            // Generate new AES key for next transaction
            generateAESKey();
        }

        function updateTransactionHistory() {
            const historyContainer = document.getElementById('transactionHistory');
            if (gameState.transactionHistory.length === 0) {
                historyContainer.innerHTML = '<p style="color: var(--text-secondary); text-align: center;">Ch∆∞a c√≥ giao d·ªãch n√†o</p>';
                return;
            }

            let historyHTML = '';
            gameState.transactionHistory.slice(-5).reverse().forEach(transaction => {
                historyHTML += `
                    <div style="background: rgba(40, 167, 69, 0.1); padding: 10px; margin: 5px 0; border-radius: 5px; border-left: 3px solid var(--success-green);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <strong>Giao d·ªãch #${transaction.id}</strong>
                            <span style="color: var(--text-secondary); font-size: 0.9rem;">Level ${transaction.level}</span>
                        </div>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">${transaction.timestamp}</div>
                    </div>
                `;
            });
            historyContainer.innerHTML = historyHTML;
        }

        // Security Tools
        async function generateHash() {
            const input = document.getElementById('hashInput').value;
            if (!input) {
                showNotification('Vui l√≤ng nh·∫≠p d·ªØ li·ªáu ƒë·ªÉ hash!', 'error');
                return;
            }

            try {
                const hash = await createSHA256Hash(input);
                document.getElementById('hashOutput').value = hash;
                addScore(5, 'T·∫°o hash th√†nh c√¥ng');
                showNotification('Hash ƒë√£ ƒë∆∞·ª£c t·∫°o!', 'success');
            } catch (error) {
                showNotification('L·ªói t·∫°o hash: ' + error.message, 'error');
            }
        }

        function checkPhishing() {
            const input = document.getElementById('phishingInput').value;
            if (!input) {
                showNotification('Vui l√≤ng nh·∫≠p URL ho·∫∑c email ƒë·ªÉ ki·ªÉm tra!', 'error');
                return;
            }

            const result = detectPhishing(input);
            const resultDiv = document.getElementById('phishingResult');
            
            resultDiv.style.display = 'block';
            if (result.isSuspicious) {
                resultDiv.style.background = 'rgba(220, 53, 69, 0.2)';
                resultDiv.style.border = '2px solid var(--danger-red)';
                resultDiv.innerHTML = `
                    <h4 style="color: var(--danger-red);">‚ö†Ô∏è C·∫¢NH B√ÅO: ƒê√°ng nghi!</h4>
                    <p>M·ª©c ƒë·ªô nguy hi·ªÉm: <strong>${result.riskLevel}</strong></p>
                    <p>ƒêi·ªÉm nguy hi·ªÉm: ${result.riskScore}/100</p>
                    <ul>${result.warnings.map(w => `<li>${w}</li>`).join('')}</ul>
                `;
                addScore(20, 'Ph√°t hi·ªán phishing');
            } else {
                resultDiv.style.background = 'rgba(40, 167, 69, 0.2)';
                resultDiv.style.border = '2px solid var(--success-green)';
                resultDiv.innerHTML = `
                    <h4 style="color: var(--success-green);">‚úÖ An to√†n</h4>
                    <p>URL/Email n√†y c√≥ v·∫ª an to√†n</p>
                    <p>ƒêi·ªÉm nguy hi·ªÉm: ${result.riskScore}/100</p>
                `;
                addScore(10, 'Ki·ªÉm tra b·∫£o m·∫≠t');
            }
        }

        // Data Import/Export
        function exportGameData() {
            const data = {
                gameState: gameState,
                timestamp: new Date().toISOString(),
                version: '1.0'
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `securebank_pro_save_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c xu·∫•t!', 'success');
        }

        function importGameData() {
            document.getElementById('importFile').click();
        }

        function handleImportFile(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    if (data.gameState) {
                        Object.assign(gameState, data.gameState);
                        updateStatsDisplay();
                        updateTransactionHistory();
                        showNotification('D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c nh·∫≠p th√†nh c√¥ng!', 'success');
                        saveGameState();
                    } else {
                        throw new Error('ƒê·ªãnh d·∫°ng file kh√¥ng h·ª£p l·ªá');
                    }
                } catch (error) {
                    showNotification('L·ªói ƒë·ªçc file: ' + error.message, 'error');
                }
            };
            reader.readAsText(file);
        }

        // Game State Persistence
        function saveGameState() {
            localStorage.setItem('secureBankPro_gameState', JSON.stringify(gameState));
        }

        function loadGameState() {
            const saved = localStorage.getItem('secureBankPro_gameState');
            if (saved) {
                try {
                    Object.assign(gameState, JSON.parse(saved));
                    updateStatsDisplay();
                    updateTransactionHistory();
                } catch (error) {
                    console.error('Error loading game state:', error);
                }
            }
        }

        // ===========================================
        // MINI GAMES IMPLEMENTATION
        // ===========================================

        // 1. Password Strength Game
        function checkPasswordStrength() {
            const password = document.getElementById('userPassword').value;
            const result = calculatePasswordStrength(password);
            
            const strengthBar = document.getElementById('strengthBar');
            const feedback = document.getElementById('passwordFeedback');
            
            // Update strength bar
            strengthBar.className = `strength-bar strength-${result.strength.toLowerCase().replace(' ', '-')}`;
            
            // Update feedback
            feedback.innerHTML = `
                <h4>ƒê·ªô m·∫°nh: ${result.strength} (${result.score}/100)</h4>
                ${result.feedback.length > 0 ? '<ul>' + result.feedback.map(f => `<li>${f}</li>`).join('') + '</ul>' : '<p>‚úÖ M·∫≠t kh·∫©u r·∫•t t·ªët!</p>'}
            `;
        }

        function calculatePasswordStrength(password) {
            let score = 0;
            let feedback = [];
            
            // Length check
            if (password.length >= 12) score += 25;
            else if (password.length >= 8) {
                score += 15;
                feedback.push('N√™n d√πng √≠t nh·∫•t 12 k√Ω t·ª±');
            } else {
                feedback.push('M·∫≠t kh·∫©u qu√° ng·∫Øn (c·∫ßn √≠t nh·∫•t 8 k√Ω t·ª±)');
            }
            
            // Character type checks
            if (/[A-Z]/.test(password)) score += 20;
            else feedback.push('C·∫ßn c√≥ ch·ªØ hoa');
            
            if (/[a-z]/.test(password)) score += 20;
            else feedback.push('C·∫ßn c√≥ ch·ªØ th∆∞·ªùng');
            
            if (/\d/.test(password)) score += 20;
            else feedback.push('C·∫ßn c√≥ s·ªë');
            
            if (/[!@#$%^&*()_+\-=\[\]{}|;:,.<>?]/.test(password)) score += 15;
            else feedback.push('N√™n c√≥ k√Ω t·ª± ƒë·∫∑c bi·ªát');
            
            // Determine strength
            let strength;
            if (score >= 90) strength = 'Very Strong';
            else if (score >= 70) strength = 'Strong';
            else if (score >= 50) strength = 'Medium';
            else if (score >= 30) strength = 'Weak';
            else strength = 'Very Weak';
            
            return { score, strength, feedback };
        }

        function togglePasswordVisibility(inputId) {
            const input = document.getElementById(inputId);
            input.type = input.type === 'password' ? 'text' : 'password';
        }

        function updateLengthDisplay() {
            const length = document.getElementById('passwordLength').value;
            document.getElementById('lengthDisplay').textContent = length;
        }

        function generateStrongPassword() {
            const length = parseInt(document.getElementById('passwordLength').value);
            const includeUppercase = document.getElementById('includeUppercase').checked;
            const includeLowercase = document.getElementById('includeLowercase').checked;
            const includeNumbers = document.getElementById('includeNumbers').checked;
            const includeSymbols = document.getElementById('includeSymbols').checked;
            
            const password = createStrongPassword(length, includeUppercase, includeLowercase, includeNumbers, includeSymbols);
            document.getElementById('generatedPassword').value = password;
            addScore(15, 'T·∫°o m·∫≠t kh·∫©u m·∫°nh');
        }

        function createStrongPassword(length, upper, lower, numbers, symbols) {
            let chars = '';
            let password = [];
            
            if (lower) {
                chars += 'abcdefghijklmnopqrstuvwxyz';
                password.push('abcdefghijklmnopqrstuvwxyz'[Math.floor(Math.random() * 26)]);
            }
            if (upper) {
                chars += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                password.push('ABCDEFGHIJKLMNOPQRSTUVWXYZ'[Math.floor(Math.random() * 26)]);
            }
            if (numbers) {
                chars += '0123456789';
                password.push('0123456789'[Math.floor(Math.random() * 10)]);
            }
            if (symbols) {
                const symbolChars = '!@#$%^&*()_+-=[]{}|;:,.<>?';
                chars += symbolChars;
                password.push(symbolChars[Math.floor(Math.random() * symbolChars.length)]);
            }
            
            // Fill remaining length
            for (let i = password.length; i < length; i++) {
                password.push(chars[Math.floor(Math.random() * chars.length)]);
            }
            
            // Shuffle password
            for (let i = password.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [password[i], password[j]] = [password[j], password[i]];
            }
            
            return password.join('');
        }

        function startPasswordChallenge() {
            const challenges = [
                'T·∫°o m·∫≠t kh·∫©u c√≥ √≠t nh·∫•t 10 k√Ω t·ª± v·ªõi ch·ªØ hoa, ch·ªØ th∆∞·ªùng v√† s·ªë',
                'T·∫°o m·∫≠t kh·∫©u m·∫°nh kh√¥ng ch·ª©a t·ª´ trong t·ª´ ƒëi·ªÉn',
                'T·∫°o m·∫≠t kh·∫©u c√≥ √≠t nh·∫•t 12 k√Ω t·ª± v·ªõi t·∫•t c·∫£ lo·∫°i k√Ω t·ª±',
                'T·∫°o m·∫≠t kh·∫©u d·ªÖ nh·ªõ nh∆∞ng kh√≥ ƒëo√°n'
            ];
            
            const requirements = [
                ['√çt nh·∫•t 10 k√Ω t·ª±', 'C√≥ ch·ªØ hoa', 'C√≥ ch·ªØ th∆∞·ªùng', 'C√≥ s·ªë'],
                ['√çt nh·∫•t 8 k√Ω t·ª±', 'Kh√¥ng ch·ª©a t·ª´ th√¥ng d·ª•ng', 'C√≥ k√Ω t·ª± ƒë·∫∑c bi·ªát'],
                ['√çt nh·∫•t 12 k√Ω t·ª±', 'C√≥ t·∫•t c·∫£ lo·∫°i k√Ω t·ª±', 'ƒêi·ªÉm m·∫°nh > 80'],
                ['D·ªÖ nh·ªõ', 'Kh√≥ ƒëo√°n', 'An to√†n cao']
            ];
            
            const challengeIndex = Math.floor(Math.random() * challenges.length);
            const requirementsList = document.getElementById('challengeRequirements');
            
            requirementsList.innerHTML = requirements[challengeIndex]
                .map(req => `<li>${req}</li>`).join('');
        }

        // 2. Crypto Puzzle Game
        const cryptoPuzzles = {
            caesar: {
                name: 'Caesar Cipher',
                generate: () => {
                    const texts = [
                        'HELLO WORLD',
                        'SECURITY FIRST',
                        'CRYPTOGRAPHY IS AMAZING',
                        'PROTECT YOUR DATA',
                        'BLOCKCHAIN TECHNOLOGY'
                    ];
                    const text = texts[Math.floor(Math.random() * texts.length)];
                    const shift = Math.floor(Math.random() * 25) + 1;
                    const encrypted = caesarCipher(text, shift);
                    return {
                        original: text,
                        encrypted: encrypted,
                        hint: `Caesar cipher v·ªõi shift = ${shift}`,
                        shift: shift
                    };
                }
            },
            vigenere: {
                name: 'Vigenere Cipher',
                generate: () => {
                    const texts = ['CYBER SECURITY', 'ENCRYPTION KEY', 'DIGITAL SIGNATURE'];
                    const keys = ['BANK', 'SAFE', 'GOLD', 'LOCK'];
                    const text = texts[Math.floor(Math.random() * texts.length)];
                    const key = keys[Math.floor(Math.random() * keys.length)];
                    const encrypted = vigenereCipher(text, key);
                    return {
                        original: text,
                        encrypted: encrypted,
                        hint: `Vigenere cipher v·ªõi kh√≥a = ${key}`,
                        key: key
                    };
                }
            },
            reverse: {
                name: 'Reverse Text',
                generate: () => {
                    const texts = ['BANKING SECURITY', 'SECURE TRANSACTION', 'FINANCIAL PROTECTION'];
                    const text = texts[Math.floor(Math.random() * texts.length)];
                    const encrypted = text.split('').reverse().join('');
                    return {
                        original: text,
                        encrypted: encrypted,
                        hint: 'VƒÉn b·∫£n ƒë√£ ƒë∆∞·ª£c ƒë·∫£o ng∆∞·ª£c',
                        key: null
                    };
                }
            },
            base64: {
                name: 'Base64 Encoding',
                generate: () => {
                    const texts = ['SECRET MESSAGE', 'CONFIDENTIAL DATA', 'PRIVATE INFORMATION'];
                    const text = texts[Math.floor(Math.random() * texts.length)];
                    const encrypted = btoa(text);
                    return {
                        original: text,
                        encrypted: encrypted,
                        hint: 'D·ªØ li·ªáu ƒë∆∞·ª£c m√£ h√≥a Base64',
                        key: null
                    };
                }
            }
        };

        let currentPuzzle = null;

        function generateCryptoPuzzle() {
            const cipherType = document.getElementById('cipherType').value;
            currentPuzzle = cryptoPuzzles[cipherType].generate();
            
            document.getElementById('encryptedPuzzle').value = currentPuzzle.encrypted;
            document.getElementById('puzzleHint').textContent = '';
            document.getElementById('puzzleSolution').value = '';
            document.getElementById('puzzleResult').style.display = 'none';
        }

        function checkPuzzleSolution() {
            if (!currentPuzzle) {
                showNotification('Vui l√≤ng t·∫°o c√¢u ƒë·ªë tr∆∞·ªõc!', 'error');
                return;
            }
            
            const userSolution = document.getElementById('puzzleSolution').value.toUpperCase().trim();
            const correctSolution = currentPuzzle.original.toUpperCase();
            
            const resultDiv = document.getElementById('puzzleResult');
            resultDiv.style.display = 'block';
            
            if (userSolution === correctSolution) {
                resultDiv.style.background = 'rgba(40, 167, 69, 0.2)';
                resultDiv.style.border = '2px solid var(--success-green)';
                resultDiv.innerHTML = `
                    <h4 style="color: var(--success-green);">üéâ Ch√≠nh x√°c!</h4>
                    <p>B·∫°n ƒë√£ gi·∫£i m√£ th√†nh c√¥ng: <strong>${correctSolution}</strong></p>
                `;
                gameState.cryptoSolved++;
                addScore(30, 'Gi·∫£i m√£ th√†nh c√¥ng');
            } else {
                resultDiv.style.background = 'rgba(220, 53, 69, 0.2)';
                resultDiv.style.border = '2px solid var(--danger-red)';
                resultDiv.innerHTML = `
                    <h4 style="color: var(--danger-red);">‚ùå Ch∆∞a ƒë√∫ng</h4>
                    <p>K·∫øt qu·∫£ c·ªßa b·∫°n: <strong>${userSolution}</strong></p>
                    <p>H√£y th·ª≠ l·∫°i ho·∫∑c xem g·ª£i √Ω!</p>
                `;
            }
        }

        function showPuzzleHint() {
            if (!currentPuzzle) {
                showNotification('Vui l√≤ng t·∫°o c√¢u ƒë·ªë tr∆∞·ªõc!', 'error');
                return;
            }
            
            document.getElementById('puzzleHint').textContent = currentPuzzle.hint;
            addScore(5, 'Xem g·ª£i √Ω');
        }

        // Cipher implementations
        function caesarCipher(text, shift) {
            return text.split('').map(char => {
                if (char.match(/[A-Z]/)) {
                    return String.fromCharCode((char.charCodeAt(0) - 65 + shift) % 26 + 65);
                }
                return char;
            }).join('');
        }

        function vigenereCipher(text, key) {
            let result = '';
            let keyIndex = 0;
            
            for (let i = 0; i < text.length; i++) {
                const char = text[i];
                if (char.match(/[A-Z]/)) {
                    const textCode = char.charCodeAt(0) - 65;
                    const keyCode = key[keyIndex % key.length].charCodeAt(0) - 65;
                    const encryptedCode = (textCode + keyCode) % 26;
                    result += String.fromCharCode(encryptedCode + 65);
                    keyIndex++;
                } else {
                    result += char;
                }
            }
            return result;
        }

        // 3. Phishing Detection Game
        const phishingEmails = [
            {
                isPhishing: true,
                content: `
                    <h3>üö® C·∫¢NH B√ÅO B·∫¢O M·∫¨T KH·∫®N C·∫§P</h3>
                    <p><strong>T·ª´:</strong> security@vietcombannk.com</p>
                    <p><strong>Ti√™u ƒë·ªÅ:</strong> T√†i kho·∫£n c·ªßa b·∫°n s·∫Ω b·ªã kh√≥a trong 24 gi·ªù!</p>
                    <p>Ch√†o b·∫°n,</p>
                    <p>Ch√∫ng t√¥i ph√°t hi·ªán ho·∫°t ƒë·ªông ƒë√°ng ng·ªù trong t√†i kho·∫£n c·ªßa b·∫°n. Vui l√≤ng CLICK V√ÄO ƒê√ÇY ƒë·ªÉ x√°c minh danh t√≠nh ngay l·∫≠p t·ª©c, n·∫øu kh√¥ng t√†i kho·∫£n s·∫Ω b·ªã kh√≥a vƒ©nh vi·ªÖn!</p>
                    <p><a href="http://vietcombank-security.tk/verify">X√°c minh t√†i kho·∫£n ngay</a></p>
                    <p>Tr√¢n tr·ªçng,<br>ƒê·ªôi ng≈© b·∫£o m·∫≠t VietComBank</p>
                `,
                reasons: ['Email gi·∫£ m·∫°o th∆∞∆°ng hi·ªáu ng√¢n h√†ng', 'Domain l·∫° (.tk)', 'T·∫°o c·∫£m gi√°c kh·∫©n c·∫•p', 'Y√™u c·∫ßu click link ƒë√°ng ng·ªù']
            },
            {
                isPhishing: false,
                content: `
                    <h3>üìß Th√¥ng b√°o giao d·ªãch</h3>
                    <p><strong>T·ª´:</strong> no-reply@vietcombank.com.vn</p>
                    <p><strong>Ti√™u ƒë·ªÅ:</strong> Bi√™n lai giao d·ªãch #VCB20241215001</p>
                    <p>K√≠nh g·ª≠i Qu√Ω kh√°ch,</p>
                    <p>T√†i kho·∫£n c·ªßa Qu√Ω kh√°ch v·ª´a c√≥ giao d·ªãch:</p>
                    <ul>
                        <li>S·ªë ti·ªÅn: 500,000 VND</li>
                        <li>Th·ªùi gian: 15/12/2024 14:30</li>
                        <li>N·ªôi dung: Thanh to√°n h√≥a ƒë∆°n ƒëi·ªán</li>
                    </ul>
                    <p>ƒê·ªÉ bi·∫øt th√™m chi ti·∫øt, Qu√Ω kh√°ch vui l√≤ng ƒëƒÉng nh·∫≠p v√†o ·ª©ng d·ª•ng VCB Digibank.</p>
                    <p>Tr√¢n tr·ªçng!</p>
                `,
                reasons: ['Email ch√≠nh th·ª©c t·ª´ ng√¢n h√†ng', 'Domain ch√≠nh th·ª©c', 'Kh√¥ng y√™u c·∫ßu th√¥ng tin nh·∫°y c·∫£m', 'H∆∞·ªõng d·∫´n ƒëƒÉng nh·∫≠p qua app ch√≠nh th·ª©c']
            },
            {
                isPhishing: true,
                content: `
                    <h3>üéâ CH√öC M·ª™NG! B·∫†N ƒê√É TR√öNG TH∆Ø·ªûNG!</h3>
                    <p><strong>T·ª´:</strong> promo@techcombank-vn.info</p>
                    <p><strong>Ti√™u ƒë·ªÅ:</strong> B·∫°n ƒë√£ tr√∫ng 50,000,000 VND!</p>
                    <p>Xin ch√∫c m·ª´ng!</p>
                    <p>B·∫°n ƒë√£ ƒë∆∞·ª£c ch·ªçn ng·∫´u nhi√™n trong ch∆∞∆°ng tr√¨nh khuy·∫øn m·∫°i c·ªßa TechcomBank v√† tr√∫ng gi·∫£i th∆∞·ªüng 50 tri·ªáu VND!</p>
                    <p>ƒê·ªÉ nh·∫≠n th∆∞·ªüng, vui l√≤ng cung c·∫•p th√¥ng tin sau:</p>
                    <ul>
                        <li>S·ªë t√†i kho·∫£n</li>
                        <li>S·ªë CMND/CCCD</li>
                        <li>M√£ pin ATM</li>
                    </ul>
                    <p>Ph·∫ßn th∆∞·ªüng s·∫Ω ƒë∆∞·ª£c chuy·ªÉn trong 24h!</p>
                `,
                reasons: ['Gi·∫£ m·∫°o th∆∞∆°ng hi·ªáu ng√¢n h√†ng', 'Qu√° t·ªët ƒë·ªÉ l√† th·∫≠t', 'Y√™u c·∫ßu th√¥ng tin nh·∫°y c·∫£m', 'Domain gi·∫£ m·∫°o']
            }
        ];

        let currentPhishingEmail = null;

        function loadNewPhishingEmail() {
            currentPhishingEmail = phishingEmails[Math.floor(Math.random() * phishingEmails.length)];
            document.getElementById('emailContent').innerHTML = currentPhishingEmail.content;
            document.getElementById('phishingFeedback').style.display = 'none';
            document.getElementById('phishingReason').value = '';
            
            // Reset email styling
            const emailDiv = document.getElementById('phishingEmail');
            emailDiv.className = 'phishing-email';
        }

        function reportPhishing(isPhishing) {
            if (!currentPhishingEmail) return;
            
            const feedback = document.getElementById('phishingFeedback');
            const emailDiv = document.getElementById('phishingEmail');
            const userReason = document.getElementById('phishingReason').value;
            
            feedback.style.display = 'block';
            
            if (isPhishing === currentPhishingEmail.isPhishing) {
                // Correct answer
                feedback.style.background = 'rgba(40, 167, 69, 0.2)';
                feedback.style.border = '2px solid var(--success-green)';
                feedback.innerHTML = `
                    <h4 style="color: var(--success-green);">‚úÖ Ch√≠nh x√°c!</h4>
                    <p>B·∫°n ƒë√£ ${isPhishing ? 'ph√°t hi·ªán ƒë√∫ng email phishing' : 'x√°c ƒë·ªãnh ƒë√∫ng email an to√†n'}!</p>
                    <h5>L√Ω do:</h5>
                    <ul>${currentPhishingEmail.reasons.map(r => `<li>${r}</li>`).join('')}</ul>
                    ${userReason ? `<p><strong>Nh·∫≠n x√©t c·ªßa b·∫°n:</strong> ${userReason}</p>` : ''}
                `;
                
                if (isPhishing) {
                    gameState.phishingDetected++;
                    addScore(25, 'Ph√°t hi·ªán phishing');
                    emailDiv.className = 'phishing-email';
                } else {
                    addScore(15, 'X√°c ƒë·ªãnh email an to√†n');
                    emailDiv.className = 'phishing-email safe-email';
                }
            } else {
                // Wrong answer
                feedback.style.background = 'rgba(220, 53, 69, 0.2)';
                feedback.style.border = '2px solid var(--danger-red)';
                feedback.innerHTML = `
                    <h4 style="color: var(--danger-red);">‚ùå Ch∆∞a ch√≠nh x√°c</h4>
                    <p>Email n√†y ${currentPhishingEmail.isPhishing ? 'l√† phishing' : 'an to√†n'}!</p>
                    <h5>L√Ω do:</h5>
                    <ul>${currentPhishingEmail.reasons.map(r => `<li>${r}</li>`).join('')}</ul>
                    <p>H√£y c·∫©n th·∫≠n h∆°n l·∫ßn sau!</p>
                `;
            }
        }

        function showPhishingTips() {
            const tips = document.getElementById('phishingTips');
            tips.style.display = tips.style.display === 'none' ? 'block' : 'none';
        }

        // 4. Network Security Game
        let networkNodes = [];
        let networkGameActive = false;
        let attacksBlocked = 0;
        let computersSaved = 0;
        let securityScore = 100;

        function startNetworkGame() {
            networkNodes = [];
            attacksBlocked = 0;
            computersSaved = 0;
            securityScore = 100;
            networkGameActive = true;
            
            // Create 25 nodes (5x5 grid)
            const networkGrid = document.getElementById('networkGrid');
            networkGrid.innerHTML = '';
            
            for (let i = 0; i < 25; i++) {
                const node = {
                    id: i,
                    status: 'safe', // safe, infected, protected
                    element: null
                };
                
                const nodeElement = document.createElement('div');
                nodeElement.className = 'network-node';
                nodeElement.textContent = i + 1;
                nodeElement.onclick = () => selectNode(i);
                
                node.element = nodeElement;
                networkNodes.push(node);
                networkGrid.appendChild(nodeElement);
            }
            
            updateNetworkDisplay();
            
            // Start random attacks
            if (networkGameActive) {
                setTimeout(randomAttack, 3000);
            }
        }

        function selectNode(nodeId) {
            const node = networkNodes[nodeId];
            if (node.status === 'infected') {
                // Clean infected node
                node.status = 'safe';
                computersSaved++;
                securityScore = Math.min(100, securityScore + 5);
                addScore(20, 'L√†m s·∫°ch m√°y t√≠nh b·ªã nhi·ªÖm');
                showNotification(`ƒê√£ l√†m s·∫°ch m√°y t√≠nh ${nodeId + 1}!`, 'success');
            }
            updateNetworkDisplay();
        }

        function randomAttack() {
            if (!networkGameActive) return;
            
            const safeNodes = networkNodes.filter(n => n.status === 'safe');
            if (safeNodes.length > 0) {
                const targetNode = safeNodes[Math.floor(Math.random() * safeNodes.length)];
                
                // Check if attack is blocked by protected neighbors
                const neighbors = getNeighbors(targetNode.id);
                const protectedNeighbors = neighbors.filter(n => networkNodes[n].status === 'protected');
                
                if (protectedNeighbors.length > 0 && Math.random() < 0.7) {
                    // Attack blocked
                    attacksBlocked++;
                    addScore(15, 'Ch·∫∑n t·∫•n c√¥ng');
                    showNotification(`Ch·∫∑n t·∫•n c√¥ng v√†o m√°y ${targetNode.id + 1}!`, 'success');
                } else {
                    // Attack successful
                    targetNode.status = 'infected';
                    securityScore = Math.max(0, securityScore - 10);
                    showNotification(`M√°y ${targetNode.id + 1} b·ªã nhi·ªÖm!`, 'error');
                }
            }
            
            updateNetworkDisplay();
            
            // Schedule next attack
            if (networkGameActive) {
                setTimeout(randomAttack, Math.random() * 5000 + 2000);
            }
        }

        function getNeighbors(nodeId) {
            const neighbors = [];
            const row = Math.floor(nodeId / 5);
            const col = nodeId % 5;
            
            // Check adjacent nodes (up, down, left, right)
            if (row > 0) neighbors.push((row - 1) * 5 + col); // up
            if (row < 4) neighbors.push((row + 1) * 5 + col); // down
            if (col > 0) neighbors.push(row * 5 + (col - 1)); // left
            if (col < 4) neighbors.push(row * 5 + (col + 1)); // right
            
            return neighbors;
        }

        function deployFirewall() {
            const safeNodes = networkNodes.filter(n => n.status === 'safe');
            if (safeNodes.length > 0) {
                const node = safeNodes[Math.floor(Math.random() * safeNodes.length)];
                node.status = 'protected';
                addScore(10, 'Tri·ªÉn khai Firewall');
                showNotification(`Firewall ƒë√£ ƒë∆∞·ª£c c√†i tr√™n m√°y ${node.id + 1}!`, 'success');
                updateNetworkDisplay();
            }
        }

        function installAntivirus() {
            const infectedNodes = networkNodes.filter(n => n.status === 'infected');
            if (infectedNodes.length > 0) {
                const node = infectedNodes[Math.floor(Math.random() * infectedNodes.length)];
                node.status = 'safe';
                computersSaved++;
                securityScore = Math.min(100, securityScore + 10);
                addScore(25, 'C√†i Antivirus');
                showNotification(`Antivirus ƒë√£ l√†m s·∫°ch m√°y ${node.id + 1}!`, 'success');
                updateNetworkDisplay();
            } else {
                const safeNodes = networkNodes.filter(n => n.status === 'safe');
                if (safeNodes.length > 0) {
                    const node = safeNodes[Math.floor(Math.random() * safeNodes.length)];
                    node.status = 'protected';
                    addScore(10, 'C√†i Antivirus b·∫£o v·ªá');
                    updateNetworkDisplay();
                }
            }
        }

        function updateSecurity() {
            securityScore = Math.min(100, securityScore + 15);
            addScore(15, 'C·∫≠p nh·∫≠t b·∫£o m·∫≠t');
            showNotification('H·ªá th·ªëng b·∫£o m·∫≠t ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t!', 'success');
            updateNetworkDisplay();
        }

        function simulateAttack() {
            for (let i = 0; i < 3; i++) {
                setTimeout(randomAttack, i * 1000);
            }
        }

        function resetNetwork() {
            networkGameActive = false;
            startNetworkGame();
        }

        function updateNetworkDisplay() {
            let safeCount = 0;
            let infectedCount = 0;
            let protectedCount = 0;
            
            networkNodes.forEach(node => {
                const element = node.element;
                element.className = 'network-node';
                
                switch (node.status) {
                    case 'safe':
                        safeCount++;
                        break;
                    case 'infected':
                        element.classList.add('infected');
                        infectedCount++;
                        break;
                    case 'protected':
                        element.classList.add('protected');
                        protectedCount++;
                        break;
                }
            });
            
            document.getElementById('safeNodes').textContent = safeCount;
            document.getElementById('infectedNodes').textContent = infectedCount;
            document.getElementById('protectedNodes').textContent = protectedCount;
            document.getElementById('attacksBlocked').textContent = attacksBlocked;
            document.getElementById('computersSaved').textContent = computersSaved;
            document.getElementById('securityScore').textContent = securityScore;
        }

        // 5. Hash Race Game
        let hashRaceActive = false;
        let hashAttempts = 0;
        let hashSuccesses = 0;
        let hashStartTime = 0;
        let bestTime = null;
        let currentTargetPrefix = '00';

        function startHashRace() {
            hashRaceActive = true;
            hashAttempts = 0;
            hashStartTime = Date.now();
            
            // Generate random target prefix
            const prefixes = ['0', '00', '000', '1', '11', 'a', 'ab', 'ff'];
            currentTargetPrefix = prefixes[Math.floor(Math.random() * prefixes.length)];
            document.getElementById('targetPrefix').textContent = currentTargetPrefix;
            
            showNotification(`Hash Race b·∫Øt ƒë·∫ßu! T√¨m hash b·∫Øt ƒë·∫ßu b·∫±ng "${currentTargetPrefix}"`, 'info');
            updateHashTimer();
        }

        function calculateHash() {
            const input = document.getElementById('hashInput').value;
            if (!input) {
                showNotification('Vui l√≤ng nh·∫≠p chu·ªói ƒë·ªÉ hash!', 'error');
                return;
            }

            hashAttempts++;
            
            // Simple SHA-256 implementation (for demo purposes)
            const hash = simpleHash(input);
            document.getElementById('hashResult').value = hash;
            
            if (hash.startsWith(currentTargetPrefix)) {
                // Success!
                hashSuccesses++;
                const timeElapsed = (Date.now() - hashStartTime) / 1000;
                
                if (!bestTime || timeElapsed < bestTime) {
                    bestTime = timeElapsed;
                    document.getElementById('bestTime').textContent = timeElapsed.toFixed(2) + 's';
                }
                
                addScore(50 + (currentTargetPrefix.length * 20), 'T√¨m th·∫•y hash collision');
                showNotification(`üéâ T√¨m th·∫•y! Hash: ${hash}`, 'success');
                
                // Add to history
                const history = document.getElementById('successfulHashes');
                const newEntry = document.createElement('div');
                newEntry.innerHTML = `
                    <strong>${input}</strong> ‚Üí ${hash}<br>
                    <small>Th·ªùi gian: ${timeElapsed.toFixed(2)}s, L·∫ßn th·ª≠: ${hashAttempts}</small>
                `;
                newEntry.style.padding = '10px';
                newEntry.style.margin = '5px 0';
                newEntry.style.background = 'rgba(40, 167, 69, 0.1)';
                newEntry.style.borderRadius = '5px';
                
                if (history.textContent === 'Ch∆∞a c√≥ hash n√†o th√†nh c√¥ng') {
                    history.innerHTML = '';
                }
                history.appendChild(newEntry);
                
                // Start new challenge
                setTimeout(startHashRace, 2000);
            }
            
            updateHashStats();
        }

        function autoHashSearch() {
            if (hashRaceActive) {
                const randomString = Math.random().toString(36).substring(2);
                document.getElementById('hashInput').value = randomString;
                calculateHash();
                
                setTimeout(autoHashSearch, 100);
            }
        }

        function stopHashRace() {
            hashRaceActive = false;
            showNotification('Hash Race ƒë√£ d·ª´ng!', 'info');
        }

        function updateHashTimer() {
            if (hashRaceActive) {
                const elapsed = (Date.now() - hashStartTime) / 1000;
                const minutes = Math.floor(elapsed / 60);
                const seconds = Math.floor(elapsed % 60);
                document.getElementById('hashTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                setTimeout(updateHashTimer, 1000);
            }
        }

        function updateHashStats() {
            document.getElementById('hashAttempts').textContent = hashAttempts;
            document.getElementById('hashSuccesses').textContent = hashSuccesses;
            
            if (hashAttempts > 0) {
                const rate = hashAttempts / ((Date.now() - hashStartTime) / 1000);
                document.getElementById('hashRate').textContent = rate.toFixed(1);
            }
        }

        // Simple hash function for demo
        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // Convert to 32-bit integer
            }
            return Math.abs(hash).toString(16).padStart(8, '0').substring(0, 8);
        }

        // 6. Social Engineering Defense Game
        const socialScenarios = [
            {
                scenario: `üìû CU·ªòC G·ªåI: "Xin ch√†o, t√¥i l√† nh√¢n vi√™n IT c·ªßa c√¥ng ty. H·ªá th·ªëng c·ªßa ch√∫ng t√¥i b·ªã t·∫•n c√¥ng v√† t√¥i c·∫ßn m·∫≠t kh·∫©u c·ªßa b·∫°n ƒë·ªÉ b·∫£o v·ªá t√†i kho·∫£n ngay l·∫≠p t·ª©c!"`,
                options: [
                    { text: 'Cung c·∫•p m·∫≠t kh·∫©u ngay l·∫≠p t·ª©c', correct: false, reason: 'Kh√¥ng bao gi·ªù cung c·∫•p m·∫≠t kh·∫©u qua ƒëi·ªán tho·∫°i!' },
                    { text: 'H·ªèi th√¥ng tin li√™n l·∫°c v√† g·ªçi l·∫°i qua s·ªë ch√≠nh th·ª©c', correct: true, reason: 'ƒê√∫ng! Lu√¥n x√°c minh danh t√≠nh qua k√™nh ch√≠nh th·ª©c.' },
                    { text: 'Y√™u c·∫ßu g·ª≠i email x√°c nh·∫≠n', correct: false, reason: 'Email c≈©ng c√≥ th·ªÉ b·ªã gi·∫£ m·∫°o.' },
                    { text: 'Cung c·∫•p m·∫≠t kh·∫©u c≈©', correct: false, reason: 'B·∫•t k·ª≥ m·∫≠t kh·∫©u n√†o c≈©ng kh√¥ng n√™n chia s·∫ª.' }
                ]
            },
            {
                scenario: `üìß EMAIL: "Ch√∫c m·ª´ng! B·∫°n ƒë√£ tr√∫ng gi·∫£i ƒë·∫∑c bi·ªát 100 tri·ªáu VND t·ª´ ch∆∞∆°ng tr√¨nh khuy·∫øn m·∫°i. Click v√†o link ƒë·ªÉ nh·∫≠n th∆∞·ªüng: http://lottery-winner.tk/claim"`,
                options: [
                    { text: 'Click v√†o link ngay l·∫≠p t·ª©c', correct: false, reason: 'Link c√≥ th·ªÉ ch·ª©a malware ho·∫∑c trang gi·∫£ m·∫°o!' },
                    { text: 'Chia s·∫ª tin t·ª©c v·ªõi b·∫°n b√®', correct: false, reason: 'ƒê√¢y c√≥ th·ªÉ l√† l·ª´a ƒë·∫£o, kh√¥ng n√™n lan truy·ªÅn.' },
                    { text: 'B√°o c√°o email spam v√† x√≥a', correct: true, reason: 'ƒê√∫ng! ƒê√¢y l√† d·∫•u hi·ªáu r√µ r√†ng c·ªßa l·ª´a ƒë·∫£o.' },
                    { text: 'Tr·∫£ l·ªùi email ƒë·ªÉ h·ªèi th√™m th√¥ng tin', correct: false, reason: 'Kh√¥ng n√™n t∆∞∆°ng t√°c v·ªõi email l·ª´a ƒë·∫£o.' }
                ]
            },
            {
                scenario: `üí¨ M·∫†NG X√É H·ªòI: M·ªôt ng∆∞·ªùi l·∫° g·ª≠i tin nh·∫Øn: "T√¥i l√† b·∫°n c·ªßa anh/ch·ªã X, ƒëang g·∫∑p kh√≥ khƒÉn t√†i ch√≠nh kh·∫©n c·∫•p. B·∫°n c√≥ th·ªÉ chuy·ªÉn ti·ªÅn gi√∫p kh√¥ng? T√¥i s·∫Ω tr·∫£ l·∫°i ngay."`,
                options: [
                    { text: 'Chuy·ªÉn ti·ªÅn ngay ƒë·ªÉ gi√∫p ƒë·ª°', correct: false, reason: 'ƒê√¢y l√† chi√™u tr√≤ l·ª´a ƒë·∫£o ph·ªï bi·∫øn!' },
                    { text: 'Li√™n h·ªá tr·ª±c ti·∫øp v·ªõi b·∫°n X ƒë·ªÉ x√°c minh', correct: true, reason: 'ƒê√∫ng! Lu√¥n x√°c minh qua ng∆∞·ªùi quen tr·ª±c ti·∫øp.' },
                    { text: 'Y√™u c·∫ßu g·∫∑p m·∫∑t tr·ª±c ti·∫øp', correct: false, reason: 'K·∫ª l·ª´a ƒë·∫£o s·∫Ω kh√¥ng ƒë·ªìng √Ω g·∫∑p m·∫∑t.' },
                    { text: 'H·ªèi th√™m th√¥ng tin c√° nh√¢n', correct: false, reason: 'Kh√¥ng n√™n t∆∞∆°ng t√°c v·ªõi ng∆∞·ªùi l·∫° ƒë√°ng ng·ªù.' }
                ]
            },
            {
                scenario: `üì± SMS: "TK c·ªßa ban bi khoa do vi pham. Truy cap ngay: vietcombank-unlock.info/verify de mo khoa. LH: 0123456789"`,
                options: [
                    { text: 'Truy c·∫≠p link ngay l·∫≠p t·ª©c', correct: false, reason: 'Link gi·∫£ m·∫°o c√≥ th·ªÉ ƒë√°nh c·∫Øp th√¥ng tin!' },
                    { text: 'G·ªçi s·ªë ƒëi·ªán tho·∫°i trong tin nh·∫Øn', correct: false, reason: 'S·ªë ƒëi·ªán tho·∫°i c√≥ th·ªÉ c·ªßa k·∫ª l·ª´a ƒë·∫£o.' },
                    { text: 'ƒê·∫øn ng√¢n h√†ng ho·∫∑c g·ªçi hotline ch√≠nh th·ª©c', correct: true, reason: 'ƒê√∫ng! Lu√¥n li√™n h·ªá qua k√™nh ch√≠nh th·ª©c.' },
                    { text: 'Chuy·ªÉn ti·∫øp tin nh·∫Øn cho b·∫°n b√®', correct: false, reason: 'Kh√¥ng n√™n lan truy·ªÅn tin nh·∫Øn l·ª´a ƒë·∫£o.' }
                ]
            }
        ];

        let currentSocialScenario = null;
        let attacksDetected = 0;
        let correctDecisions = 0;
        let totalDecisions = 0;

        function loadNewSocialScenario() {
            currentSocialScenario = socialScenarios[Math.floor(Math.random() * socialScenarios.length)];
            
            document.getElementById('scenarioContent').textContent = currentSocialScenario.scenario;
            
            const optionsContainer = document.getElementById('socialOptions');
            optionsContainer.innerHTML = '';
            
            currentSocialScenario.options.forEach((option, index) => {
                const optionButton = document.createElement('button');
                optionButton.className = 'quiz-option';
                optionButton.textContent = option.text;
                optionButton.onclick = () => selectSocialOption(index);
                optionsContainer.appendChild(optionButton);
            });
            
            document.getElementById('socialFeedback').style.display = 'none';
        }

        function selectSocialOption(optionIndex) {
            if (!currentSocialScenario) return;
            
            const selectedOption = currentSocialScenario.options[optionIndex];
            const feedback = document.getElementById('socialFeedback');
            
            totalDecisions++;
            
            feedback.style.display = 'block';
            
            if (selectedOption.correct) {
                correctDecisions++;
                attacksDetected++;
                feedback.style.background = 'rgba(40, 167, 69, 0.2)';
                feedback.style.border = '2px solid var(--success-green)';
                feedback.innerHTML = `
                    <h4 style="color: var(--success-green);">‚úÖ Quy·∫øt ƒë·ªãnh ƒë√∫ng!</h4>
                    <p><strong>L√Ω do:</strong> ${selectedOption.reason}</p>
                    <p>B·∫°n ƒë√£ ph√≤ng th·ªß th√†nh c√¥ng tr∆∞·ªõc k·ªπ thu·∫≠t x√£ h·ªôi!</p>
                `;
                addScore(30, 'Ph√≤ng th·ªß k·ªπ thu·∫≠t x√£ h·ªôi');
            } else {
                feedback.style.background = 'rgba(220, 53, 69, 0.2)';
                feedback.style.border = '2px solid var(--danger-red)';
                feedback.innerHTML = `
                    <h4 style="color: var(--danger-red);">‚ùå Quy·∫øt ƒë·ªãnh ch∆∞a t·ªët</h4>
                    <p><strong>L√Ω do:</strong> ${selectedOption.reason}</p>
                    <p>H√£y c·∫©n th·∫≠n h∆°n v·ªõi c√°c k·ªπ thu·∫≠t x√£ h·ªôi!</p>
                `;
            }
            
            updateSocialStats();
            
            // Disable all options
            const options = document.querySelectorAll('#socialOptions .quiz-option');
            options.forEach((option, index) => {
                option.disabled = true;
                if (index === optionIndex) {
                    option.classList.add(selectedOption.correct ? 'correct' : 'incorrect');
                }
                if (currentSocialScenario.options[index].correct && index !== optionIndex) {
                    option.classList.add('correct');
                }
            });
        }

        function updateSocialStats() {
            document.getElementById('attacksDetected').textContent = attacksDetected;
            document.getElementById('correctDecisions').textContent = correctDecisions;
            
            if (totalDecisions > 0) {
                const successRate = Math.round((correctDecisions / totalDecisions) * 100);
                document.getElementById('successRate').textContent = successRate + '%';
                
                let alertLevel;
                if (successRate >= 80) alertLevel = 'Cao';
                else if (successRate >= 60) alertLevel = 'Trung b√¨nh';
                else alertLevel = 'Th·∫•p';
                
                document.getElementById('alertLevel').textContent = alertLevel;
            }
        }

        function showSocialTips() {
            const tips = document.getElementById('socialTips');
            tips.style.display = tips.style.display === 'none' ? 'block' : 'none';
        }

        // Cryptographic utility functions
        async function encryptAES(data, key) {
            // Simple encryption simulation
            return btoa(JSON.stringify({
                data: btoa(data),
                key: btoa(key.substring(0, 16)),
                iv: btoa(Math.random().toString())
            }));
        }

        async function decryptAES(encryptedData, key) {
            try {
                const parsed = JSON.parse(atob(encryptedData));
                if (atob(parsed.key) === key.substring(0, 16)) {
                    return atob(parsed.data);
                } else {
                    throw new Error('Invalid key');
                }
            } catch (error) {
                throw new Error('Decryption failed');
            }
        }

        async function createSHA256Hash(data) {
            // Simple hash simulation
            let hash = 0;
            for (let i = 0; i < data.length; i++) {
                const char = data.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return Math.abs(hash).toString(16).padStart(64, '0');
        }

        function detectPhishing(input) {
            const suspiciousPatterns = [
                /bit\.ly|tinyurl|t\.co|goo\.gl/i,
                /\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/,
                /[a-z0-9-]+\.(tk|ml|ga|cf)/i,
                /(paypal|amazon|google|facebook|microsoft)\w*\.(tk|ml|ga|cf|info|biz)/i,
                /secure.*update|verify.*account|suspend.*account/i,
                /urgent.*action.*required|click.*here.*now|congratulations.*winner/i
            ];
            
            let riskScore = 0;
            const warnings = [];
            
            const inputLower = input.toLowerCase();
            
            suspiciousPatterns.forEach((pattern, index) => {
                if (pattern.test(inputLower)) {
                    riskScore += 20;
                    switch (index) {
                        case 0: warnings.push('URL r√∫t g·ªçn c√≥ th·ªÉ ·∫©n ƒë·ªãa ch·ªâ th·∫≠t'); break;
                        case 1: warnings.push('S·ª≠ d·ª•ng ƒë·ªãa ch·ªâ IP thay v√¨ t√™n mi·ªÅn'); break;
                        case 2: warnings.push('S·ª≠ d·ª•ng t√™n mi·ªÅn mi·ªÖn ph√≠ ƒë√°ng nghi'); break;
                        case 3: warnings.push('C√≥ th·ªÉ gi·∫£ m·∫°o th∆∞∆°ng hi·ªáu n·ªïi ti·∫øng'); break;
                        case 4: warnings.push('Ch·ª©a t·ª´ kh√≥a phishing ph·ªï bi·∫øn'); break;
                        case 5: warnings.push('Ng√¥n t·ª´ t·∫°o c·∫£m gi√°c kh·∫©n c·∫•p'); break;
                    }
                }
            });
            
            let riskLevel;
            if (riskScore >= 60) riskLevel = 'Cao';
            else if (riskScore >= 40) riskLevel = 'Trung b√¨nh';
            else if (riskScore >= 20) riskLevel = 'Th·∫•p';
            else riskLevel = 'An to√†n';
            
            return {
                riskScore: Math.min(riskScore, 100),
                riskLevel: riskLevel,
                warnings: warnings,
                isSuspicious: riskScore >= 40
            };
        }

        // Initialize mini games when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            generateCryptoPuzzle();
            updateLengthDisplay();
        });
    </script>
</body>
</html>